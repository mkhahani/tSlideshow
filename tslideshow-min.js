/**
 *  tSlideshow - Tiny DHTML/Javascript Slideshow, v1.0
 *  © 2011 Mohsen Khahani
 *  http://mohsenkhahani.com/tslideshow
 */
var tSlideshowConfig={pagination:true,autoPlay:true,interval:5000,duration:15};function tSlideshow(b,a,d,e){if(!(this.slider=document.getElementById(b))){return}this.slides=this.slider.children;if(!(this.count=this.slides.length)){this.slider=null;return}this.currIdx=(this.slides[e-1])?e-1:0;this.timer=null;this.interval=tSlideshowConfig.interval;this.duration=tSlideshowConfig.duration;this.width=this.slider.clientWidth;this.playing=false;this.reset=false;this.skips=0;var c;for(c=0;c<this.count;c++){this.slides[c].style.position="absolute";this.slides[c].style.left=this.width+"px"}this.slides[this.currIdx].style.left=0;if(typeof a==="undefined"){a=tSlideshowConfig.pagination}if(a){this.pagination=this.getPagination();this.pagination.children[this.currIdx].className="current"}if(typeof d==="undefined"){d=tSlideshowConfig.autoPlay}if(d){this.play(this.interval)}}tSlideshow.prototype.play=function(a){if(this.slider&&this.count>1&&!this.playing){var b=this;this.timer=setTimeout(function(){b.next()},(a||b.interval));this.playing=true}};tSlideshow.prototype.pause=function(){clearTimeout(this.timer);this.reset=true;this.playing=false};tSlideshow.prototype.next=function(){var a=(this.currIdx===this.count-1)?0:this.currIdx+1,b=this.interval,d=this.duration,f=this.width,c=true,e;if(this.skips>=1){this.skips--}else{if(this.skips<=-1){a=(this.currIdx===0)?this.count-1:this.currIdx-1;f=-f;this.skips++}}if(this.skips){b=0;d=5;c=false}e=-f;if(this.pagination){this.pagination.children[this.currIdx].className="";this.pagination.children[a].className="current"}this.reset=false;this.transform(this.slides[a],f,e,b,d,c,(this.skips!==0||this.playing));this.transform(this.slides[this.currIdx],0,e,b,d,c);this.currIdx=a};tSlideshow.prototype.transform=function(i,c,b,d,f,k,g){var h=1,e=1,j=this;function a(l){if(j.reset){i.style.left=c-j.width+"px";return}i.style.left=l+"px";if(h<=f){e=h;if(k){l=-b*(e/=f)*(e-2)+c}else{l=b*h/f+c}setTimeout(function(){a(Math.round(l))},30);h++}else{if(g){if(d){j.timer=setTimeout(function(){j.next()},d)}else{j.next()}}}}a(c)};tSlideshow.prototype.goToSlide=function(b){var a=b.id.replace(this.pagination.id,""),c;if(a!=this.currIdx){c=this;this.reset=true;clearTimeout(this.timer);this.skips=a-this.currIdx;this.timer=setTimeout(function(){c.next()},50)}};tSlideshow.prototype.getPagination=function(){var c=document.createElement("div"),b,a;c.id=this.slider.id+"-pagination";c.className=this.slider.className+"-pagination";for(a=0;a<this.count;a++){b=document.createElement("span");b.id=c.id+a;b.innerHTML="&nbsp;";this.addEvent(b);c.appendChild(b)}this.slider.parentNode.appendChild(c);return c};tSlideshow.prototype.addEvent=function(a){var b=this;if(a.addEventListener){a.addEventListener("click",function(){b.goToSlide(a)},false)}else{a.attachEvent("onclick",function(){b.goToSlide(a)})}};